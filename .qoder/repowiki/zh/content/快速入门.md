# 快速入门

<cite>
**本文档中引用的文件**
- [README.md](file://README.md)
- [pyproject.toml](file://pyproject.toml)
- [rdagent/app/cli.py](file://rdagent/app/cli.py)
- [rdagent/app/utils/health_check.py](file://rdagent/app/utils/health_check.py)
- [rdagent/utils/env.py](file://rdagent/utils/env.py)
- [rdagent/app/qlib_rd_loop/quant.py](file://rdagent/app/qlib_rd_loop/quant.py)
- [rdagent/app/general_model/general_model.py](file://rdagent/app/general_model/general_model.py)
- [rdagent/app/kaggle/loop.py](file://rdagent/app/kaggle/loop.py)
- [requirements.txt](file://requirements.txt)
- [Makefile](file://Makefile)
- [rdagent/scenarios/data_science/example/README.md](file://rdagent/scenarios/data_science/example/README.md)
</cite>

## 目录
1. [简介](#简介)
2. [系统要求](#系统要求)
3. [安装步骤](#安装步骤)
4. [环境验证](#环境验证)
5. [.env文件配置](#env文件配置)
6. [使用示例](#使用示例)
7. [故障排除](#故障排除)
8. [总结](#总结)

## 简介

RD-Agent是一个基于大型语言模型(LLM)的智能研发代理框架，旨在自动化数据驱动的研发过程。它支持多种应用场景，包括量化交易、数据分析科学、Kaggle竞赛等。本指南将帮助您在15分钟内成功运行第一个实例。

## 系统要求

### 基础要求
- **操作系统**: Linux (目前仅支持Linux)
- **Python版本**: 3.10 或 3.11 (推荐)
- **Docker**: 必须安装Docker (用于运行各种场景)

### 安装前检查
在开始安装之前，请确保：
```bash
# 检查Docker是否可用
docker run hello-world

# 检查Python版本
python --version  # 应该显示3.10或3.11
```

**节来源**
- [README.md](file://README.md#L180-L190)
- [pyproject.toml](file://pyproject.toml#L15-L17)

## 安装步骤

### 方法一：通过PyPI安装 (推荐)

这是最简单的安装方式，适合大多数用户：

```bash
# 创建并激活Python虚拟环境
conda create -n rdagent python=3.10
conda activate rdagent

# 安装RD-Agent
pip install rdagent
```

### 方法二：从源码安装 (开发者模式)

如果您想尝试最新功能或贡献代码：

```bash
# 克隆仓库
git clone https://github.com/microsoft/RD-Agent
cd RD-Agent

# 开发环境设置
make dev
```

### 验证安装

安装完成后，验证RD-Agent是否正确安装：

```bash
# 查看版本信息
rdagent --version

# 查看可用命令
rdagent --help
```

**节来源**
- [README.md](file://README.md#L191-L210)
- [Makefile](file://Makefile#L24-L57)

## 环境验证

### 健康检查

运行健康检查来验证您的环境配置：

```bash
# 基础健康检查 (不检查环境配置)
rdagent health_check --no-check-env

# 完整健康检查 (推荐)
rdagent health_check
```

### 健康检查内容

健康检查会验证以下项目：
- ✅ Docker安装状态
- ✅ 默认端口(19899)可用性
- ✅ LLM API配置 (可选)

如果遇到问题，健康检查会提供详细的错误信息和解决方案。

**节来源**
- [rdagent/app/utils/health_check.py](file://rdagent/app/utils/health_check.py#L150-L171)

## .env文件配置

### 创建配置文件

在项目根目录创建`.env`文件：

```bash
touch .env
```

### 基础配置模板

以下是几种常见的配置方式：

#### OpenAI配置
```bash
cat << EOF > .env
# 设置聊天模型和嵌入模型
CHAT_MODEL=gpt-4o
EMBEDDING_MODEL=text-embedding-3-small

# 配置API密钥
OPENAI_API_KEY=your_openai_api_key_here
```

#### Azure OpenAI配置
```bash
cat << EOF > .env
# 嵌入模型配置
EMBEDDING_MODEL=azure/text-embedding-3-small
CHAT_MODEL=azure/gpt-4o

# Azure配置
AZURE_API_KEY=your_azure_api_key
AZURE_API_BASE=https://your-resource.openai.azure.com/
AZURE_API_VERSION=2024-02-15-preview
```

#### DeepSeek配置
```bash
cat << EOF > .env
# 聊天模型：使用DeepSeek官方API
CHAT_MODEL=deepseek/deepseek-chat
DEEPSEEK_API_KEY=your_deepseek_api_key

# 嵌入模型：使用SiliconFlow (因为DeepSeek没有嵌入模型)
EMBEDDING_MODEL=litellm_proxy/BAAI/bge-m3
LITELLM_PROXY_API_KEY=your_siliconflow_api_key
LITELLM_PROXY_API_BASE=https://api.siliconflow.cn/v1
```

### 高级配置选项

#### 分离的聊天和嵌入API配置
```bash
cat << EOF > .env
# 聊天模型配置
CHAT_MODEL=gpt-4o
OPENAI_API_BASE=https://api.openai.com/v1
OPENAI_API_KEY=your_chat_api_key

# 嵌入模型配置
EMBEDDING_MODEL=litellm_proxy/BAAI/bge-large-en-v1.5
LITELLM_PROXY_API_KEY=your_embedding_api_key
LITELLM_PROXY_API_BASE=https://api.siliconflow.cn/v1
```

#### 思维链处理配置
如果使用包含思维链响应的推理模型：
```bash
REASONING_THINK_RM=True
```

### 验证配置

完成配置后，运行健康检查验证：

```bash
rdagent health_check
```

**节来源**
- [README.md](file://README.md#L211-L320)
- [rdagent/app/utils/health_check.py](file://rdagent/app/utils/health_check.py#L79-L128)

## 使用示例

### 示例1：量化策略联合演化 (fin_quant)

这个示例展示了如何启动量化策略的自动演化过程：

```bash
# 启动量化策略联合演化
rdagent fin_quant
```

#### 预期输出
```
[INFO] Starting Quantitative Finance R&D Loop...
[INFO] Initializing factor and model proposal generators...
[INFO] Running iterative optimization cycle...
[LOG] Factor evolution: ✓
[LOG] Model evolution: ✓
[LOG] Performance metrics updated...
```

#### 功能特点
- 自动因子提取和优化
- 模型联合演化
- 实时性能监控
- 多目标优化

**节来源**
- [rdagent/app/qlib_rd_loop/quant.py](file://rdagent/app/qlib_rd_loop/quant.py#L120-L144)

### 示例2：通用模型实现 (general_model)

从论文URL自动实现机器学习模型：

```bash
# 从ArXiv论文实现模型
rdagent general_model "https://arxiv.org/pdf/2210.09789"

# 支持的论文格式
# - ArXiv论文链接
# - PDF文件路径
# - 科研报告
```

#### 支持的论文示例
```bash
# 时间序列预测模型
rdagent general_model "https://arxiv.org/pdf/2210.09789"

# 图神经网络模型  
rdagent general_model "https://arxiv.org/pdf/2305.10498"

# 强化学习模型
rdagent general_model "https://arxiv.org/pdf/2110.14446"
```

#### 工作流程
1. 论文解析和摘要提取
2. 模型结构识别
3. 代码自动生成
4. 实验执行和评估

**节来源**
- [rdagent/app/general_model/general_model.py](file://rdagent/app/general_model/general_model.py#L15-L46)

### 示例3：Kaggle竞赛场景

#### 步骤1：准备竞赛环境

```bash
# 下载示例数据集
wget https://github.com/SunsetWolf/rdagent_resource/releases/download/ds_data/arf-12-hours-prediction-task.zip
unzip arf-12-hours-prediction-task.zip -d ./git_ignore_folder/ds_data/
```

#### 步骤2：配置环境变量

```bash
# 设置数据路径
dotenv set DS_LOCAL_DATA_PATH "$(pwd)/git_ignore_folder/ds_data"

# 启用完整管道编码
dotenv set DS_CODER_ON_WHOLE_PIPELINE True

# 禁用MLE数据使用
dotenv set DS_IF_USING_MLE_DATA False

# 禁用LLM采样数据
dotenv set DS_SAMPLE_DATA_BY_LLM False

# 设置场景类型
dotenv set DS_SCEN rdagent.scenarios.data_science.scen.DataScienceScen
```

#### 步骤3：运行竞赛场景

```bash
# 启动数据科学竞赛
rdagent data_science --competition arf-12-hours-prediction-task
```

#### 预期输出
```
[INFO] Starting Data Science Competition Loop...
[INFO] Loading competition data: arf-12-hours-prediction-task
[INFO] Analyzing problem statement...
[LOG] Feature engineering: ✓
[LOG] Model selection: ✓
[LOG] Hyperparameter tuning: ✓
[LOG] Submission generated: ✓
```

#### 可用竞赛列表
- `arf-12-hours-prediction-task` (医疗预测)
- `playground-series-s4e9` (公开数据集)
- `titanic` (经典分类任务)
- `digit-recognizer` (图像识别)

**节来源**
- [rdagent/app/kaggle/loop.py](file://rdagent/app/kaggle/loop.py#L110-L140)
- [rdagent/scenarios/data_science/example/README.md](file://rdagent/scenarios/data_science/example/README.md#L1-L66)

## 故障排除

### 常见问题及解决方案

#### 1. Docker相关问题

**问题**: Docker无法启动容器
```bash
# 解决方案：检查Docker服务状态
sudo systemctl status docker

# 如果未运行，启动Docker服务
sudo systemctl start docker
```

**问题**: 权限不足
```bash
# 将当前用户添加到docker组
sudo usermod -aG docker $USER
# 重新登录或执行
newgrp docker
```

#### 2. LLM API配置问题

**问题**: API密钥无效
```bash
# 检查.env文件中的API密钥
cat .env | grep API_KEY

# 验证API密钥有效性
curl -H "Authorization: Bearer YOUR_API_KEY" \
     https://api.openai.com/v1/models
```

**问题**: 模型不可用
```bash
# 检查可用模型
rdagent health_check --no-check-docker --no-check-ports
```

#### 3. 竞赛数据问题

**问题**: 数据下载失败
```bash
# 手动下载数据
kaggle competitions download -c competition-name
unzip competition-name.zip -d ./data/
```

**问题**: 内存不足
```bash
# 增加Docker内存限制
export DOCKER_DEFAULT_PLATFORM=linux/amd64
export DOCKER_MEMORY_LIMIT=8g
```

### 调试技巧

#### 启用详细日志
```bash
# 设置日志级别
export RDAGENT_LOG_LEVEL=DEBUG

# 运行具体命令查看详细输出
rdagent fin_quant --verbose
```

#### 检查端口占用
```bash
# 检查端口19899是否被占用
netstat -tulpn | grep 19899

# 切换到其他端口
rdagent ui --port 19900
```

**节来源**
- [rdagent/app/utils/health_check.py](file://rdagent/app/utils/health_check.py#L25-L50)
- [rdagent/utils/env.py](file://rdagent/utils/env.py#L80-L117)

## 总结

通过本快速入门指南，您已经学会了：

1. ✅ 安装RD-Agent (PyPI或源码)
2. ✅ 配置环境和LLM API
3. ✅ 运行健康检查验证
4. ✅ 使用三个核心示例
   - `rdagent fin_quant` - 量化策略演化
   - `rdagent general_model` - 论文模型实现
   - `rdagent data_science` - Kaggle竞赛

### 下一步建议

1. **探索更多场景**: 尝试不同的应用领域
2. **自定义配置**: 根据需求调整参数
3. **参与社区**: 加入Discord讨论
4. **贡献代码**: 参与开源项目发展

### 获取帮助

- **官方文档**: https://rdagent.readthedocs.io/
- **GitHub Issues**: 报告问题和请求功能
- **Discord社区**: 实时交流和支持

现在，您已经具备了运行RD-Agent的基础知识。开始您的智能研发之旅吧！